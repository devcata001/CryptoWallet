<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ChainPilot - Add Funds</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/style.css" />
</head>

<body class="dark-theme">
    <div class="mobile-topbar d-lg-none">
        <div class="brand"><i class="fa-solid fa-wallet"></i><span>ChainPilot</span></div>
        <div class="hamburger"><i class="fa fa-bars"></i></div>
    </div>
    <aside class="sidebar">
        <div class="brand"><i class="fa-solid fa-wallet"></i><span>ChainPilot</span></div>
        <nav class="nav flex-column"><a class="nav-link" href="../index.html"><i class="fa fa-chart-line"></i>
                Overview</a><a class="nav-link" href="send.html"><i class="fa fa-paper-plane"></i> Send</a><a
                class="nav-link" href="receive.html"><i class="fa fa-download"></i> Receive</a><a
                class="nav-link active" href="add.html"><i class="fa fa-plus"></i> Add Funds</a><a class="nav-link"
                href="transactions.html"><i class="fa fa-clock-rotate-left"></i> Transactions</a><a class="nav-link"
                href="profile.html"><i class="fa fa-user"></i> Profile</a><a class="nav-link" href="security.html"><i
                    class="fa fa-shield"></i> Security</a></nav>
        <div class="mt-auto"><button id="logoutBtn" class="btn btn-outline-light w-100 btn-sm"><i
                    class="fa fa-right-from-bracket"></i> Logout</button></div>
    </aside>
    <main class="main">
        <h1 class="mb-3 page-enter">Add Funds</h1>
        <p class="text-secondary page-enter-delay-1">Increase your demo holdings. This simulates deposits; no real
            blockchain interaction.
        </p>
        <div class="form-card page-enter-delay-2">
            <form id="addFundsForm" class="row g-3">
                <div class="col-md-6"><label class="form-label">Asset</label><select name="asset" class="form-select"
                        id="addAssetSelect"></select></div>
                <div class="col-md-6"><label class="form-label">Amount</label><input type="number" step="0.00000001"
                        name="amount" class="form-control" placeholder="0" value="2000" required /></div>
                <div class="col-12 d-flex gap-3 mt-2"><button type="submit" class="btn btn-primary"><i
                            class="fa fa-plus"></i> Add</button><a href="../index.html"
                        class="btn btn-outline-light">Back</a></div>
            </form><small class="text-secondary d-block mt-3">Tip: Deposit SOL or other assets to update your balance
                instantly.</small>
        </div>
    </main>
    <script src="../js/prices.js"></script>
    <script src="../js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var select = document.getElementById('addAssetSelect');
            function populateAssets() {
                // Only allow these assets, in this order
                const allowed = [
                    'BTC', 'USDC', 'USDT', 'ETH', 'BNB', 'SOL', 'TRX', 'TON', 'SUI', 'LTC'
                ];
                if (window.PriceService && PriceService.ASSETS && select) {
                    select.innerHTML = PriceService.ASSETS
                        .filter(a => allowed.includes(a.symbol))
                        .sort((a, b) => allowed.indexOf(a.symbol) - allowed.indexOf(b.symbol))
                        .map(a => `<option value="${a.symbol}">${a.name} (${a.symbol})</option>`).join('');
                    // Preselect asset from query param if provided
                    const params = new URLSearchParams(location.search);
                    const pre = params.get('asset');
                    if (pre) {
                        const opt = Array.from(select.options).find(o => o.value === pre);
                        if (opt) select.value = pre;
                    }
                } else if (select) {
                    // fallback static list if PriceService is not ready
                    select.innerHTML = '<option>BTC</option><option>USDC</option><option>USDT</option><option>ETH</option><option>BNB</option><option>SOL</option><option>TRX</option><option>TON</option><option>SUI</option><option>LTC</option>';
                }
            }
            // Try immediately, then again after a short delay in case scripts are slow
            populateAssets();
            setTimeout(populateAssets, 200);
        });
    </script>
</body>

</html>