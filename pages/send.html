<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ChainPilot - Send</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/style.css" />
</head>

<body class="dark-theme">
    <div class="mobile-topbar d-lg-none">
        <div class="brand"><i class="fa-solid fa-wallet"></i><span>ChainPilot</span></div>
        <div class="hamburger"><i class="fa fa-bars"></i></div>
    </div>
    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
        <a class="bottom-nav-link" href="../index.html">
            <i class="fa fa-chart-line"></i>
            <span>Overview</span>
        </a>
        <a class="bottom-nav-link active" href="send.html">
            <i class="fa fa-paper-plane"></i>
            <span>Send</span>
        </a>
        <a class="bottom-nav-link" href="receive.html">
            <i class="fa fa-download"></i>
            <span>Receive</span>
        </a>
        <a class="bottom-nav-link" href="add.html">
            <i class="fa fa-arrow-up-right-dots"></i>
            <span>Buy</span>
        </a>
        <a class="bottom-nav-link" href="transactions.html">
            <i class="fa fa-clock-rotate-left"></i>
            <span>Txs</span>
        </a>
        <a class="bottom-nav-link" href="settings.html">
            <i class="fa fa-gear"></i>
            <span>Settings</span>
        </a>
    </nav>
    <main class="main">
        <h1 class="mb-3 page-enter">Send Crypto</h1>
        <p class="text-secondary page-enter-delay-1">Transfer an asset to another address (demo only).</p>
        <div class="form-card page-enter-delay-2">
            <form id="sendForm">
                <div class="mb-3"><label class="form-label">Recipient Address</label><input type="text" name="recipient"
                        class="form-control" id="recipientInput" placeholder="0x..." required />
                    <div id="recipientInfo" class="form-text text-secondary mt-1">Length: 0</div>
                </div>
                <div class="row g-3">
                    <div class="col-md-6"><label class="form-label">Amount</label><input type="number" step="0.00000001"
                            name="amount" class="form-control" placeholder="0.0" required /></div>
                    <div class="col-md-6"><label class="form-label">Asset</label><select name="asset"
                            class="form-select" id="sendAssetSelect"></select></div>
                </div>
                <div id="sendPreview" class="mt-3 small text-secondary">Fee: 0 | Total: 0 | Remaining: --</div>
                <div class="mt-4 d-flex gap-3"><button class="btn btn-primary px-4" type="submit"><i
                            class="fa fa-paper-plane"></i> Send</button><a href="../index.html"
                        class="btn btn-outline-light">Cancel</a></div><small class="text-secondary d-block mt-3">Network
                    fee simulated at 0.2%.</small>
            </form>
        </div>
    </main>
    <script src="../js/prices.js"></script>
    <script src="../js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var select = document.getElementById('sendAssetSelect');
            function populateAssets() {
                // Only allow these assets, in this order
                const allowed = [
                    'BTC', 'USDC', 'USDT', 'ETH', 'BNB', 'SOL', 'TRX', 'TON', 'SUI', 'LTC'
                ];
                if (window.PriceService && PriceService.ASSETS && select) {
                    select.innerHTML = PriceService.ASSETS
                        .filter(a => allowed.includes(a.symbol))
                        .sort((a, b) => allowed.indexOf(a.symbol) - allowed.indexOf(b.symbol))
                        .map(a => `<option value="${a.symbol}">${a.name} (${a.symbol})</option>`).join('');
                } else if (select) {
                    // fallback static list if PriceService is not ready
                    select.innerHTML = '<option>BTC</option><option>USDC</option><option>USDT</option><option>ETH</option><option>BNB</option><option>SOL</option><option>TRX</option><option>TON</option><option>SUI</option><option>LTC</option>';
                }
            }
            populateAssets();
            setTimeout(populateAssets, 200);
        });
    </script>
</body>

</html>